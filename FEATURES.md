# Lovart Web 功能特性文档

## 📋 项目概述

Lovart Web 是一个现代化的数字工作空间应用，集成了AI助手和创意工具，为用户提供智能化的内容创作和协作环境。基于 React 18 + TypeScript + Fabric.js 构建，提供丰富的画布编辑功能和协作特性。

## 🎨 核心功能模块

### 1. Canvas 画布系统

#### 1.1 基础画布功能
- **画布渲染**: 基于 Fabric.js 的高性能画布渲染引擎
- **响应式设计**: 画布自动适应浏览器窗口大小变化
- **缩放控制**: 支持鼠标滚轮缩放，缩放范围 0.1x - 5x
- **平移操作**: 支持拖拽平移画布视图
- **视图重置**: Ctrl+0 快速重置视图到默认状态

#### 1.2 绘图工具
- **选择工具**: 选择和编辑画布元素
- **文本工具**: 创建和编辑文本元素
  - 支持双击进入编辑模式
  - 文本属性面板（字体、大小、颜色、对齐）
  - 自动全选编辑状态
- **矩形工具**: 创建矩形形状
  - 拖拽绘制矩形
  - 支持透明填充和边框样式
- **图片工具**: 上传和插入图片
  - 支持本地文件上传
  - 自动调整图片大小
- **画笔工具**: 自由绘制功能
- **评论工具**: 在画布上添加评论和标注

#### 1.3 元素管理
- **元素选择**: 点击选择单个元素
- **元素编辑**: 双击进入编辑模式
- **元素复制**: Option+拖拽快速复制元素
- **元素删除**: 选中后按 Delete 键删除
- **层级管理**: 支持元素层级调整

#### 1.4 连接线功能
- **连接点**: 矩形元素自动显示四个角的连接点
- **贝塞尔曲线**: 创建美观的贝塞尔曲线连接线
- **拖拽连接**: 从连接点拖拽到目标元素完成连接
- **实时预览**: 拖拽过程中显示虚线预览
- **连接管理**: 支持连接线的选择和删除

### 2. 评论系统

#### 2.1 评论创建
- **画布评论**: 在画布空白处添加评论
- **元素评论**: 在特定元素上添加关联评论
- **评论模式**: 专门的评论工具模式
- **右键创建**: 支持右键快速创建评论

#### 2.2 评论管理
- **评论面板**: 右侧评论管理面板
- **评论列表**: 显示所有评论的列表视图
- **搜索过滤**: 支持按内容和作者搜索
- **状态筛选**: 按已解决/未解决状态筛选
- **评论编辑**: 支持编辑评论内容
- **评论删除**: 支持删除评论

#### 2.3 评论交互
- **拖拽移动**: 评论图标支持拖拽移动位置
- **框选功能**: Shift+拖拽框选多个评论
- **多选操作**: Ctrl+点击多选评论
- **评论详情**: 点击查看评论详细信息和回复
- **回复功能**: 支持对评论进行回复

#### 2.4 评论视觉
- **颜色主题**: 10种预设颜色主题
- **评论图标**: 直观的评论标记图标
- **悬停效果**: 鼠标悬停显示评论预览
- **选中状态**: 清晰的选中状态视觉反馈

### 3. 工具栏系统

#### 3.1 工具切换
- **选择工具**: 默认选择模式
- **文本工具**: 文本创建和编辑
- **矩形工具**: 矩形形状绘制
- **图片工具**: 图片上传和插入
- **画笔工具**: 自由绘制
- **评论工具**: 评论创建模式

#### 3.2 工具状态
- **活动状态**: 当前激活的工具高亮显示
- **工具提示**: 鼠标悬停显示工具名称
- **状态同步**: 工具状态与画布操作同步
- **快捷键支持**: 支持键盘快捷键切换工具

### 4. 状态管理系统

#### 4.1 Canvas 状态
- **元素管理**: 画布上所有元素的状态管理
- **选择状态**: 当前选中元素的状态
- **历史记录**: 操作历史记录和撤销/重做
- **视图状态**: 画布缩放和平移状态

#### 4.2 工具状态
- **活动工具**: 当前激活的工具类型
- **工具选项**: 各工具的配置选项
- **状态持久化**: 工具状态本地存储

#### 4.3 评论状态
- **评论列表**: 所有评论的状态管理
- **选择状态**: 当前选中的评论
- **面板状态**: 评论面板的显示状态
- **创建状态**: 评论创建流程的状态

### 5. 用户界面

#### 5.1 布局设计
- **三栏布局**: 左侧工具栏 + 中央画布 + 右侧面板
- **响应式设计**: 适配不同屏幕尺寸
- **现代化UI**: 基于 Ant Design 的现代界面设计
- **深色主题**: 支持深色模式切换

#### 5.2 交互体验
- **流畅动画**: 平滑的过渡动画效果
- **即时反馈**: 实时的操作反馈
- **键盘快捷键**: 丰富的键盘快捷键支持
- **拖拽操作**: 直观的拖拽交互

## 🛠️ 技术特性

### 前端技术栈
- **React 18**: 现代化函数式组件
- **TypeScript**: 严格类型检查
- **Fabric.js 5.3.0**: 强大的Canvas渲染引擎
- **Ant Design**: 企业级UI组件库
- **Tailwind CSS**: 原子化CSS框架
- **Zustand**: 轻量级状态管理

### 性能优化
- **虚拟化渲染**: 大量元素的高效渲染
- **事件优化**: 优化的事件处理机制
- **内存管理**: 合理的内存使用和清理
- **懒加载**: 按需加载组件和资源

### 代码质量
- **TypeScript**: 完整的类型定义
- **ESLint**: 代码质量检查
- **模块化**: 清晰的模块分离
- **可维护性**: 易于维护和扩展的代码结构

## 🚀 使用指南

### 快速开始
1. **安装依赖**: `npm install`
2. **启动开发**: `npm run dev`
3. **访问应用**: 打开 `http://localhost:3000`

### 基本操作
1. **创建元素**: 选择工具，在画布上绘制
2. **编辑元素**: 双击元素进入编辑模式
3. **添加评论**: 切换到评论工具，点击画布或元素
4. **创建连接**: 选择矩形，拖拽连接点到目标元素
5. **管理评论**: 使用右侧评论面板管理所有评论

### 快捷键
- **Ctrl+0**: 重置画布视图
- **Delete**: 删除选中元素
- **Escape**: 取消当前操作
- **Option+拖拽**: 复制元素
- **Shift+拖拽**: 框选评论

## 📈 未来规划

### 短期目标
- [ ] 添加更多绘图工具（圆形、直线、箭头等）
- [ ] 实现图层管理功能
- [ ] 添加撤销/重做功能
- [ ] 支持文件导入/导出

### 中期目标
- [ ] 实现实时协作功能
- [ ] 添加模板系统
- [ ] 集成AI图像生成
- [ ] 支持插件扩展

### 长期目标
- [ ] 移动端适配
- [ ] 云端同步
- [ ] 团队协作
- [ ] 企业级功能

## 🤝 贡献指南

欢迎贡献代码和建议！请遵循以下步骤：

1. Fork 项目
2. 创建功能分支
3. 提交更改
4. 发起 Pull Request

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。

---

**Lovart Web** - 让创意工作更简单、更高效！
